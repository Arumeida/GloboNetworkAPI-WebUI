{% load util %}
<script type="text/javascript">
$(document).ready(function() {

    {% include "pool/include_vip_js.js" %}

    autocomplete("{% url equipment.autocomplete.ajax %}", true, "id_equip_name", false);
	$('.editable').editableTable();

	$("#page_tab").tabs();
	
	$("textarea").maxlength();
	
})
</script>

<div id="page_tab">
	<div id="messagesModal">

	</div>
    <div id="dialog_ip">
        <div id="content-ip"></div>
    </div>
	<div id="tabs-1">
		<form id="add_form_vip_pool" method="post" action="{{action}}">
			{% if environment_id %}
			<input type="hidden" name="environment" id="id_environment" value="{{ environment_id }}">
			{% endif %}
			{% csrf_token %}
			<div id="fields" class="ui-widget-content">
                {% for field in form %}
				<div>
					<div><label for="{{ field.auto_id }}">{{ field.label }}{% if field.field.required %}<span style="color: red;">*</span>{% endif %}</label></div>

					{{ field }}

					<p id="error">
					{% if field.errors %}
						{% for error in field.errors %}
							{{ error|escape }}
						{% endfor %}
					{% endif %}
					</p>

				</div>
				{% endfor %}
				<div>
					<div><label for="id_healthcheck">HealthCheck<span style="color: red;">*</span></label></div>
	
					<select style="width: 310px" name="healthcheck" id="id_healthcheck">
					</select>
	
					<p id="error">
						
					</p>

				</div>
				<br>
				<table id="table_healthcheck" class="bordasimples" style="margin-top: -10px; width: 511px; display: table;">
						<tbody>
							<tr>
								<td>
									<label for="id_healthcheck">Healthcheck</label>
								</td>
								<td style="padding-left: 5px;">
									<input id="healthcheck_request" style="width: 300px" type="text" name="healthcheck_request" maxlength="100">
								</td>
							</tr>
		
							<tr>
								<td></td>
								<td style="padding-left: 5px;"><p id="error"></p></td>
							</tr>
		
							<tr>
								<td>
									<label for="id_expect">
										<label for="id_expect">HTTP Expect String</label>
										<span style="color: red;">*</span>
									</label>
								</td>
		
								<td style="padding-left: 5px;">
									<select style="width: 185px" name="expect" id="id_expect">
				                		{% for exp_string in expect_strings.healthcheck_expect %}
				                    	<option value="{{exp_string.expect_string}}">{{exp_string.expect_string}}</option>
				                		{% endfor %}
									</select>
								</td>
							</tr>
		
							<tr>
								<td></td>
								<td style="padding-left: 5px;"><p id="error"></p></td>
							</tr>
		
		
							<tr id="add_new_healthcheck">
								<td></td>
								<td style="padding-left: 5px;">
									<input id="expect_string" type="text" name="expect_string" maxlength="100">
									<input type="button" id="btn_new_expect" value="Adicionar Novo" />
								</td>
							</tr>
		
							<tr id="msg_new_healthcheck" style="display:none;">
								<td></td>
								<td style="color: #0073EA;font-weight: bold;padding-left: 5px;">Healtcheck Expect cadastrado com sucesso.</td>
							</tr>
						</tbody>
					</table>
				<br>	
				<table  class="bordasimples" >
				<tr>
					<td colspan="3">Reals</td>
				</tr>
				<tr>
					<td>{{form_real.equip_name.label_tag}}</td>
					<td style="padding-left: 5px;">{{form_real.equip_name}}</td>
					<td><input type="button" id="btn_new_real" value="Adicionar Novo Real" /></td>
				</tr>
				<tr id="error_real_server">
				</tr>
				<tr>
					<td colspan="3">&nbsp</td>
				</tr>
				<tr>
					<td colspan="3">
						<table id="table_real" class="bordasimplesReal">
							<thead>
								<tr>
									<td>Nome do Real</td>
									<td>IP do Real</td>
									<td>Prioridade</td>
									<td>Porta Real</td>
									<td style="width: 20px;"></td>
								</tr>
							</thead>
							<tbody>

							{% for field in reals %}

								<tr class='remove_port'>
									<td>
										<label>{% if field.equipamento.nome != "-" %}{{field.equipamento.equipamento.nome}}{% endif %}</label>
										<input type='hidden' name='equip' value='{{field.equipamento.equipamento.nome}}'>
										<input type='hidden' name='id_equip' value='{{field.equipamento.equipamento.id}}'>
									</td>
									<td>
										<label>{% if field.ip_formatado != "-" %}{{field.ip_formatado}}{% endif %}</label>
										<input type='hidden' name='ip' value='{{field.ip.id}}'>
										<input type='hidden' name='id_ip' value='{{field.ip.id}}'>
									</td>
									<td>
										<label class='editable'>{% if field.priority != "-" %}{{field.priority}}{% endif %}</label>
										<input type='hidden' name='priority' value='{{field.priority}}'>
									</td>
									<td>
										<label class="editable" style="" title="Click para editar.">{% if field.port_real != "-" %}{{field.port_real}}{%endif%}</label>
										<input type="hidden" value="{{field.port_real}}" name="ports_real_reals">
									</td>
									<td>
										<span class='ui-icon ui-icon-closethick' style="cursor: pointer;"></span>
									</td>
								</tr>

							{% endfor %}


							</tbody>
						</table>
					</td>
				</tr>
				<tr>
					<td colspan="3">
						<p id="error">{{reals_error}}</p>
					</td>
				</tr>
				<tr>
					<td colspan="3">&nbsp</td>
				</tr>
				<tr>
					<td colspan="3">

						<table>
							<tr>
								<td>
									<label for="{{ form_real.maxcom.auto_id }}">{{ form_real.maxcom.label_tag }}{% if form_real.maxcom.field.required %}<span style="color: red;padding-right: 5px;">*</span>{% endif %}</label></td>
								<td>
									{{ form_real.maxcom }}
								</td>
							</tr>
							<tr>
							 	<td></td>
								<td style="padding-left: 5px;"><p id="error">{% if form_real.maxcom.errors %}{% for error in form_real.maxcom.errors %}{{ error|escape }}{% endfor %}{% endif %}</p></td>
							</tr>
						</table>

					</td>
				</tr>
			</table>
			</div>


   
		</form>
	</div>
</div>